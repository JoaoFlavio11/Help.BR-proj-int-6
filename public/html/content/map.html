<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="../../css/index.css" />
  <title>Mapa</title>
</head>

<body>
  <!--Navbar-->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Help.Br</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3"></ul>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" />
          <button class="btn botao-padrao" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>
  <!--Navbar end-->

  <!-- The sidebar -->
  <aside>
    <div class="sidebar">
      <!-- Botão de Menu com Título -->
      <button id="menuToggle" class="hamburger">
        <span class="material-symbols-outlined">menu</span>
        <span class="title">Help.BR</span>
      </button>

      <a href="http://localhost:3000/" title="Página Inicial">
        <span class="material-symbols-outlined">grid_view</span>
        <h3><b>Página Inicial</b></h3>
      </a>

      <a href="http://localhost:3000/doacoes" title="Doações disponíveis">
        <span class="material-symbols-outlined">insert_chart</span>
        <h3><b>Doações disponíveis</b></h3>
      </a>

      <a href="http://localhost:3000/cadastroDoacao" title="Crie sua Doação!">
        <span class="material-symbols-outlined">heart_plus</span>
        <h3><b>Crie sua Doação!</b></h3>
      </a>

      <a href="http://localhost:3000/parceiros" title="Patrocine nosso projeto">
        <span class="material-symbols-outlined">settings_accessibility</span>
        <h3><b>Patrocine nosso projeto</b></h3>
      </a>

      <a href="http://localhost:3000/colab/partner" title="Seja nosso parceiro">
        <span class="material-symbols-outlined">person_raised_hand</span>
        <h3><b>Seja nosso parceiro</b></h3>
      </a>

      <a href="http://localhost:3000/location/support" title="Pontos de apoio">
        <span class="material-symbols-outlined">add_location_alt</span>
        <h3><b>Pontos de apoio</b></h3>
      </a>

      <a onclick="logout()" title="Sair">
        <span class="material-symbols-outlined">exit_to_app</span>
        <h3><b>Sair</b></h3>
      </a>
    </div>
  </aside>
  <!--Sidebar end-->

  <!-- Mapa -->
  <div class="container">
    <h1>Localização dos Pontos de Apoio</h1>
    <div id="map" style="height: 400px; width: 50rem; margin-top:5rem ; margin-left: 27.5rem; border: 1px solid #ddd">
    </div>
  </div>
  <!-- Mapa end -->

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Inicializar o mapa
    const map = L.map("map").setView([-23.55052, -46.633308], 13); // Coordenadas de São Paulo como exemplo
  
    // Adicionar camada de tiles do OpenStreetMap
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution:
        '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    }).addTo(map);
  
    // Função para criar marcadores interativos
    function criarMarcador({ lat, lng, popup }) {
      const marker = L.marker([lat, lng]).addTo(map);
  
      // Adicionar popup
      marker.bindPopup(popup);
  
      // Evento ao clicar no marcador
      marker.on("click", () => {
        alert(`Você clicou no marcador em: ${lat}, ${lng}`);
      });
  
      // Alterar aparência ao passar o mouse
      marker.on("mouseover", () => {
        marker.setIcon(
          L.icon({
            iconUrl: "https://cdn-icons-png.flaticon.com/512/149/149059.png", // Exemplo de ícone
            iconSize: [30, 30],
          })
        );
      });
  
      // Restaurar ícone ao sair do marcador
      marker.on("mouseout", () => {
        marker.setIcon(L.Icon.Default.prototype.options.iconUrl);
      });
    }
  
    // Marcador fixo como exemplo inicial
    criarMarcador({
      lat: -23.55052,
      lng: -46.633308,
      popup: "<b>Ponto de Apoio</b><br>Endereço exemplo.",
    });
  
    // Adicionar mais pontos dinamicamente
    const pontos = [
      { lat: -23.551, lng: -46.634, popup: "Ponto 1: Descrição" },
      { lat: -23.552, lng: -46.635, popup: "Ponto 2: Descrição" },
      { lat: -23.553, lng: -46.636, popup: "Ponto 3: Mais detalhes aqui" },
    ];
  
    pontos.forEach((ponto) => criarMarcador(ponto));
  
    // Evento de clique no mapa para adicionar novos marcadores
    map.on("click", (e) => {
      const { lat, lng } = e.latlng;
      criarMarcador({
        lat,
        lng,
        popup: `<b>Você adicionou um novo ponto!</b><br>Lat: ${lat.toFixed(
          5
        )}, Lng: ${lng.toFixed(5)}`,
      });
      alert("Novo ponto adicionado ao mapa!");
    });
  </script>
  
</body>

</html>